<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Dart 분석</title>
        <link rel="stylesheet" href="/company-tables.css"/>
    </head>
    <body>
        <%- include('../common_html/main_title') %>
        <div class="main-body">
            <%- include('../common_html/menu') %>
            <div class="main-content">
                <div class="sub-title-wrap">
                    <span class="sub-title">기업개황</span>
                </div>
                <div class="main-tables-wrap">
                    <div class="company-list">
                    <input type="text" id="searchInput" placeholder="회사명 검색">
                        <table id="companyTable" class="company-table" border='1'>
                            <thead >
                                <tr>
                                    <th>종목코드</th>
                                    <th>고유코드</th>
                                    <th>회사명</th>
                                    <th>사업보고서 바로가기</th>
                                    <th>경실련 업종</th>
                                    <th>업종</th>
                                    <th>주요제품</th>
                                    <th>대표자명</th>
                                    <th>홈페이지</th>
                                    <th>지역</th>
                                </tr>
                            </thead>
                            <% companies.forEach(function(company) { %>
                            <tbody>
                                <tr>
                                    <td><%= company.company_code %></td>
                                    <td><%= company.primary_code %></td>
                                    <td><a href="/disclosure/company-profile/<%= company.primary_code %>"> <%= company.company_name %> </a></td>
                                    <td><a href="<%= company.company_report_url %>"><%= company.company_report_url %></a></td>
                                    <td><%= company.category %></td>
                                    <td><%= company.sector %></td>
                                    <td><%= company.main_product %></td>
                                    <td><%= company.ceo_name %></td>    
                                    <td><a href="<%= company.company_url %>"><%= company.company_url %></a></td>
                                    <td><%= company.location %></td>
                                </tr>                       
                            </tbody>
                            <% }) %>
                        </table>
                    </div>
                    <script>
                        document.getElementById("searchInput").addEventListener("keyup", function() {
                        let filter = this.value.toLowerCase();
                        let rows = document.querySelectorAll("#companyTable tbody tr");

                        rows.forEach(function(row) {
                            let companyName = row.cells[2].innerText.toLowerCase(); // 3번째 열: 회사명
                            if (companyName.indexOf(filter) > -1) {
                            row.style.display = "";
                            } else {
                            row.style.display = "none";
                            }
                        });
                        });
                    </script>
                    <div class="disclosure-detail">
                        <% if (companyProfileData && companyProfileData.status === "000") { %>
                            <h3>공시 목록</h3>
                            <table border="1">
                                <tr>
                                    <th>정식명칭</th>
                                    <td><%= companyProfileData.corp_name %></td>
                                </tr>
                                <tr>
                                    <th>영문명칭</th>
                                    <td><%= companyProfileData.corp_name_eng %></td>
                                </tr>
                                <tr>
                                    <th>종목명</th>
                                    <td><%= companyProfileData.stock_name %></td>
                                </tr>
                                <tr>
                                    <th>종목코드</th>
                                    <td><%= companyProfileData.stock_code %></td>
                                </tr>
                                <tr>
                                    <th>대표자명</th>
                                    <td><%= companyProfileData.ceo_nm %></td>
                                </tr>
                                <tr>
                                    <th>법인구분</th>
                                    <td><%= companyProfileData.corp_cls %></td>
                                </tr>
                                <tr>
                                    <th>법인등록번호</th>
                                    <td><%= companyProfileData.jurir_no %></td>
                                </tr>
                                <tr>
                                    <th>사업자등록번호</th>
                                    <td><%= companyProfileData.bizr_no %></td>
                                </tr>
                                <tr>
                                    <th>주소</th>
                                    <td><%= companyProfileData.adres %></td>
                                </tr>
                                <tr>
                                    <th>홈페이지</th>
                                    <td><a href="<%= companyProfileData.hm_url %>"><%= companyProfileData.hm_url %></a></td>
                                </tr>
                                <tr>
                                    <th>IR홈페이지</th>
                                    <td><a href="<%= companyProfileData.ir_url %>"><%= companyProfileData.ir_url %></a></td>
                                </tr>
                                <tr>
                                    <th>전화번호</th>
                                    <td><%= companyProfileData.phn_no %></td>
                                </tr>
                                <tr>
                                    <th>팩스번호</th>
                                    <td><%= companyProfileData.fax_no %></td>
                                </tr>
                                <tr>
                                    <th>업종코드</th>
                                    <td><%= companyProfileData.induty_code %></td>
                                </tr>
                                <tr>
                                    <th>설립일</th>
                                    <td><%= companyProfileData.est_dt %></td>
                                </tr>
                                <tr>
                                    <th>결산월</th>
                                    <td><%= companyProfileData.acc_mt %></td>
                                </tr>
                            </table>
                        <% } else if (companyProfileData) { %>
                            <p>데이터 없음: <%= companyProfileData.message %></p>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>